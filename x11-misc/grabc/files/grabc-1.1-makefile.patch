--- a/Makefile
+++ b/Makefile
@@ -2,17 +2,15 @@
 # Makefile automatically generated by genmake 1.0, Mar-16-97
 # genmake 1.0 by ma_muquit@fccc.edu, RCS
 ##
-CC= cc
 DEFS=  
 PROGNAME= grabc
-LIBS= -L/usr/X11R6/lib -lX11
+LIBS= $(shell ${PKG_CONFIG} --libs x11)
 
 INCLUDES=  -I.
 
-# replace -O with -g in order to debug
+# replace -O2 -pipe -Wall -march=athlon-xp with -g in order to debug
 
 DEFINES= $(INCLUDES) $(DEFS) -D__USE_FIXED_PROTOTYPES__ -DSYS_UNIX=1
-CFLAGS= -O $(DEFINES)
 
 SRCS = grabc.c
 
@@ -20,12 +18,12 @@
 
 .c.o:
 	rm -f $@
-	$(CC) $(CFLAGS) -c $*.c
+	$(CC) $(CFLAGS) $(DEFINES) -c $*.c
 
 all: $(PROGNAME)
 
 $(PROGNAME) : $(OBJS)
-	$(CC) $(CFLAGS) -o $(PROGNAME) $(OBJS) $(LIBS)
+	$(CC) $(CFLAGS) $(LDFLAGS) -o $(PROGNAME) $(OBJS) $(LIBS)
 
 clean:
 	rm -f $(OBJS) $(PROGNAME) core

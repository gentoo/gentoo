https://gitlab.com/libtiff/libtiff/-/issues/652
https://gitlab.com/libtiff/libtiff/-/issues/656
https://gitlab.com/libtiff/libtiff/-/merge_requests/673

From 388be62f9e2167ea076579e2605ff8eb91117ad6 Mon Sep 17 00:00:00 2001
From: Su_Laus <sulau@freenet.de>
Date: Wed, 30 Oct 2024 21:03:17 +0100
Subject: [PATCH 1/3] Update test/test_directory.c not to fail on big-endian
 machines.

Closes #652
--- a/test/test_directory.c	2024-12-15 23:50:13.000000000 +0000
+++ b/test/test_directory.c	2026-01-21 19:45:35.941914958 +0000
@@ -2017,8 +2017,13 @@
         /* Now there are offsets to four IFDs in the file, where the last one is
          * not existing and has a non-valid dircount and entries behind EOF.
          * (dircount is 458 (as offset) */
+#ifdef WORDS_BIGENDIAN
+        fprintf(stderr, "----- Expect error messages about 'Error fetching "
+                        "directory count.' -----\n");
+#else
         fprintf(stderr, "----- Expect error messages about 'Error fetching "
                         "directory link.' -----\n");
+#endif
         /* TIFFNumberOfDirectories() returns 3 and omits the invalid fourth IFD.
          */
         lastdir = TIFFNumberOfDirectories(tif);
@@ -2057,8 +2062,13 @@
             TIFFSwabLong(&wt);
         rr = TIFFWriteFile_M(tif, &wt, 4);
 
+#ifdef WORDS_BIGENDIAN
+        fprintf(stderr, "----- Expect error messages about 'Error fetching "
+                        "directory count.' -----\n");
+#else
         fprintf(stderr, "----- Expect error messages about 'Error fetching "
                         "directory link.' -----\n");
+#endif
         /* TIFFNumberOfDirectories() returns now 4, because for an IFD linked
          * list dircount=0 is not treated as an error and there is an offset
          * (=1) to a next IFD. Then, at the fifth IFD a link error occurs. */
@@ -2073,10 +2083,17 @@
          * The IFD 3 is not read in and curdir is set to 65535 (non-existing
          * directory).
          */
+#ifdef WORDS_BIGENDIAN
+        fprintf(stderr,
+                "----- Expect error messages about ' Unknown field with tag 1 "
+                "(0x1) encountered.' AND 'MissingRequired: TIFF directory is "
+                "missing required ImageLength field.' -----\n");
+#else
         fprintf(stderr,
                 "----- Expect error messages about 'Failed to allocate "
                 "memory for to read TIFF directory.' AND 'Failed to read "
                 "directory ..' -----\n");
+#endif
         if (TIFFSetDirectory(tif, 3))
         {
             fprintf(stderr,
@@ -2088,7 +2105,11 @@
         }
 
         /* Fails in 4.6.0 */
+#ifdef WORDS_BIGENDIAN
+        CHECKCURDIRNUM_M(tif, (tdir_t)(3), __LINE__);
+#else
         CHECKCURDIRNUM_M(tif, (tdir_t)(-1), __LINE__);
+#endif
     }
 
     TIFFClose(tif);

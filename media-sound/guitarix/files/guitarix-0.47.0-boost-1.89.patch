https://bugs.gentoo.org/963539
https://github.com/brummer10/guitarix/pull/240
https://github.com/brummer10/guitarix/pull/245

--- a/wscript
+++ b/wscript
@@ -186,8 +186,13 @@ def check_boost(conf):
     #include <boost/system/error_code.hpp>
     int main() { boost::system::error_code c; }
     """
-    msg = "Checking for boost-system "
-    conf.check_cxx(msg = msg, fragment=code, lib="boost_system", uselib_store="BOOST_SYSTEM", mandatory=1,includes='/opt/local/include', libpath='/opt/local/lib')
+    msg = "Checking for boost-system"
+    # boost_system is a stub library since boost 1.69 and is completely removed in boost 1.89
+    try:
+        conf.check_cxx(msg = msg, fragment=code, uselib_store="BOOST_SYSTEM", includes='/opt/local/include', libpath='/opt/local/lib')
+    except ConfigurationError:
+        conf.check_cxx(msg = msg, fragment=code, lib="boost_system", uselib_store="BOOST_SYSTEM", includes='/opt/local/include', libpath='/opt/local/lib')
+        #conf.check_cxx(msg = msg, fragment=code, lib="boost_system-mt", uselib_store="BOOST_SYSTEM", includes='/opt/local/include', libpath='/opt/local/lib')
     # some boost (>1.49) versions depend on boost-system so we will check for it first
     # and later link against boost_system were boost headers are included.
     boost_atleast_version = 104200
@@ -202,13 +207,11 @@ def check_boost(conf):
     int main(){ return 0; }
     """ % boost_atleast_version
     msg = "Checking for boost >= %s" % boost_atleast_vermsg
-    conf.check_cxx(msg = msg, fragment=code, lib="boost_system", mandatory=1)
-    #conf.check_cxx(msg = msg, fragment=code, lib="boost_system-mt", mandatory=1,includes='/opt/local/include', libpath='/opt/local/lib')
+    conf.check_cxx(msg = msg, fragment=code, use='BOOST_SYSTEM', mandatory=1)
+
+    msg = "Checking for boost_iostreams"
+    conf.check_cxx(msg = msg, fragment=code, lib=["boost_iostreams"], use='BOOST_SYSTEM', uselib_store="BOOST_IOSTREAMS", mandatory=1)
 
-    msg = "Checking for boost_iostreams >= %s" % boost_atleast_vermsg
-    conf.check_cxx(msg = msg, fragment=code, lib=["boost_iostreams","boost_system"], uselib_store="BOOST_IOSTREAMS", mandatory=1)
-    #conf.check_cxx(msg = msg, fragment=code, lib=["boost_iostreams","boost_system-mt"], uselib_store="BOOST_IOSTREAMS", mandatory=1, includes='/opt/local/include', libpath='/opt/local/lib')
- 
     #try:
     #    conf.check_cxx(
     #        msg = msg % "", fragment=code, lib="boost_thread", uselib_store="BOOST_THREAD",

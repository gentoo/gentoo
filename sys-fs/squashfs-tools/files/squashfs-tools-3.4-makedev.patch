--- a/mksquashfs.c
+++ b/mksquashfs.c
@@ -47,6 +47,7 @@
 #include <math.h>
 #include <regex.h>
 #include <fnmatch.h>
+#include <sys/sysmacros.h> /* makedev */
 
 #ifndef linux
 #define __BYTE_ORDER BYTE_ORDER
--- a/unsquashfs.c
+++ b/unsquashfs.c
@@ -47,6 +47,7 @@
 #include <math.h>
 #include <sys/ioctl.h>
 #include <sys/time.h>
+#include <sys/sysmacros.h> /* makedev */
 
 #ifndef linux
 #define __BYTE_ORDER BYTE_ORDER

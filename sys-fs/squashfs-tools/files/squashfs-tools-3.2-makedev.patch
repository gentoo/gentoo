--- a/unsquashfs.c
+++ b/unsquashfs.c
@@ -34,6 +34,7 @@
 #include <zlib.h>
 #include <sys/mman.h>
 #include <utime.h>
+#include <sys/sysmacros.h> /* makedev */
 
 #ifndef linux
 #define __BYTE_ORDER BYTE_ORDER
--- a/mksquashfs.c
+++ b/mksquashfs.c
@@ -44,6 +44,7 @@
 #include <sys/mman.h>
 #include <pthread.h>
 #include <math.h>
+#include <sys/sysmacros.h> /* makedev */
 
 #ifndef linux
 #define __BYTE_ORDER BYTE_ORDER

From ba2fd66d04d1db3cf4a07fcfb7e42cd2ed5c943d Mon Sep 17 00:00:00 2001
From: Antonio Rojas <arojas@archlinux.org>
Date: Sun, 11 Jan 2026 23:51:40 +0000
Subject: [PATCH] Fix build with poppler 26.01

(cherry picked from commit 3b79e0a4c3bfcae02f8403a098b2d008e3bb8a6b)

Co-authored-by: Antonio Rojas <arojas@archlinux.org>
---
 filters/karbon/pdf/SvgOutputDev.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/filters/karbon/pdf/SvgOutputDev.cpp b/filters/karbon/pdf/SvgOutputDev.cpp
index 436243da7bd..178631e02af 100644
--- a/filters/karbon/pdf/SvgOutputDev.cpp
+++ b/filters/karbon/pdf/SvgOutputDev.cpp
@@ -492,7 +492,11 @@ void SvgOutputDev::drawImage(GfxState *state,
     Q_UNUSED(interpolate)
     Q_UNUSED(inlineImg)
     ImageStream *imgStr = new ImageStream(str, width, colorMap->getNumPixelComps(), colorMap->getBits());
+#if POPPLER_VERSION_MACRO < QT_VERSION_CHECK(26, 1, 0)
     imgStr->reset();
+#else
+    imgStr->rewind();
+#endif
 
     unsigned int *dest = nullptr;
     unsigned char *buffer = new unsigned char[width * height * 4];
-- 
GitLab


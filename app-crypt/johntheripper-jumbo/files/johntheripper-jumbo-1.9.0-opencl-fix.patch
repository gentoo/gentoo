--- a/src/opencl_common.h	2020-08-03 15:49:20.000000000 +0100
+++ b/src/opencl_common.h	2020-08-03 15:55:23.081101690 +0100
@@ -81,6 +81,9 @@
 
 #ifndef CL_DEVICE_TOPOLOGY_AMD
 #define CL_DEVICE_TOPOLOGY_AMD                      0x4037
+#endif
+
+#ifndef CL_DEVICE_TOPOLOGY_TYPE_PCIE_AMD
 typedef union {
 	struct {
 		cl_uint type;

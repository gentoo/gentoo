From d9d9e606cb34b1b4ac0f44de132b1eb10763f1f6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michael=20Br=C3=BCning?= <michael.bruning@qt.io>
Date: Tue, 23 Feb 2021 16:34:39 +0100
Subject: [PATCH] FIXUP: [Backport] CVE-2021-21149: Stack overflow in Data
 Transfer

Const qualifier removed by another patch upstream had to be removed
as well.

Change-Id: I4823080661b815884c49ad9881e9958c1ba65251
Reviewed-by: Allan Sandfeld Jensen <allan.jensen@qt.io>
---
 src/3rdparty/chromium/ui/gfx/x/connection.cc | 2 +-
 src/3rdparty/chromium/ui/gfx/x/connection.h  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/3rdparty/chromium/ui/gfx/x/connection.cc b/src/3rdparty/chromium/ui/gfx/x/connection.cc
index 0afbac2c605..8152f4e06be 100644
--- a/src/3rdparty/chromium/ui/gfx/x/connection.cc
+++ b/src/3rdparty/chromium/ui/gfx/x/connection.cc
@@ -423,7 +423,7 @@ Event Connection::WaitForNextEvent() {
   return Event();
 }
 
-bool Connection::HasPendingResponses() const {
+bool Connection::HasPendingResponses() {
   DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
   return HasNextEvent() || HasNextResponse();
 }
diff --git a/src/3rdparty/chromium/ui/gfx/x/connection.h b/src/3rdparty/chromium/ui/gfx/x/connection.h
index 73a306a2ca1..0e3bbb66e53 100644
--- a/src/3rdparty/chromium/ui/gfx/x/connection.h
+++ b/src/3rdparty/chromium/ui/gfx/x/connection.h
@@ -124,7 +124,7 @@ class COMPONENT_EXPORT(X11) Connection : public XProto,
   Event WaitForNextEvent();
 
   // Are there any events, errors, or replies already buffered?
-  bool HasPendingResponses() const;
+  bool HasPendingResponses();
 
   // Dispatch any buffered events, errors, or replies.
   void Dispatch(Delegate* delegate);

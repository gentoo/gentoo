--- a/src/crypto_openssl.c	2018-02-12 15:22:13.034889560 -0800
+++ b/src/crypto_openssl.c	2018-02-12 15:22:46.714888957 -0800
@@ -117,7 +117,7 @@
 
   if(openssl_init_count == 0 && openssl_external_init == 0)  {
     /* if the library was not externally initialized, then should be now */
-#if OPENSSL_VERSION_NUMBER < 0x10100000L
+#if OPENSSL_VERSION_NUMBER < 0x10100000L || defined(LIBRESSL_VERSION_NUMBER)
     OpenSSL_add_all_algorithms();
 #endif
   } 
@@ -154,7 +154,7 @@
        Note: this code will only be reached if OpensSSL_add_all_algorithms()
        is called by SQLCipher internally. This should prevent SQLCipher from 
        "cleaning up" openssl when it was initialized externally by the program */
-#if OPENSSL_VERSION_NUMBER < 0x10100000L
+#if OPENSSL_VERSION_NUMBER < 0x10100000L || defined(LIBRESSL_VERSION_NUMBER)
       EVP_cleanup();
 #endif
     } else {

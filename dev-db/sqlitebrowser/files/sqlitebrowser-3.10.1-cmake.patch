diff --git a/src/tests/CMakeLists.txt b/src/tests/CMakeLists.txt
index 52e3067..c00cafc 100644
--- a/src/tests/CMakeLists.txt
+++ b/src/tests/CMakeLists.txt
@@ -49,9 +49,13 @@ if(ANTLR2_FOUND)
 else()
     target_link_libraries(test-sqlobjects antlr)
 endif()
-link_directories("${CMAKE_CURRENT_BINARY_DIR}/${QSCINTILLA_DIR}")
-add_dependencies(test-sqlobjects qscintilla2)
-target_link_libraries(test-sqlobjects qscintilla2)
+if(QSCINTILLA_FOUND)
+    target_link_libraries(test-sqlobjects ${QSCINTILLA_LIBRARIES})
+else()
+    link_directories("${CMAKE_CURRENT_BINARY_DIR}/${QSCINTILLA_DIR}")
+    add_dependencies(test-sqlobjects qscintilla2)
+    target_link_libraries(test-sqlobjects qscintilla2)
+endif()
 add_test(test-sqlobjects test-sqlobjects)
 
 # test-import
@@ -118,7 +122,11 @@ if(ANTLR2_FOUND)
 else()
     target_link_libraries(test-regex antlr)
 endif()
-link_directories("${CMAKE_CURRENT_BINARY_DIR}/${QSCINTILLA_DIR}")
-add_dependencies(test-regex qscintilla2)
-target_link_libraries(test-regex qscintilla2)
+if(QSCINTILLA_FOUND)
+    target_link_libraries(test-regex ${QSCINTILLA_LIBRARIES})
+else()
+    link_directories("${CMAKE_CURRENT_BINARY_DIR}/${QSCINTILLA_DIR}")
+    add_dependencies(test-regex qscintilla2)
+    target_link_libraries(test-regex qscintilla2)
+endif()
 add_test(test-regex test-regex)

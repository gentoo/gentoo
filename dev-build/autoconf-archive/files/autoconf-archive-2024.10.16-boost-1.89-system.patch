diff --git a/m4/ax_boost_system.m4 b/m4/ax_boost_system.m4
index 323e2a6..891e101 100644
--- a/m4/ax_boost_system.m4
+++ b/m4/ax_boost_system.m4
@@ -33,6 +33,13 @@
 
 #serial 20
 
+m4_define([_AX_BOOST_SYSTEM_PROGRAM],
+          [AC_LANG_PROGRAM([[
+#include <boost/version.hpp>
+]],[[
+(void) ((void)sizeof(char[1 - 2*!!((BOOST_VERSION) < ($1))]));
+]])])
+
 AC_DEFUN([AX_BOOST_SYSTEM],
 [
 	AC_ARG_WITH([boost-system],
@@ -74,9 +81,15 @@ AC_DEFUN([AX_BOOST_SYSTEM],
 				    [[boost::system::error_category *a = 0;]])],
                    ax_cv_boost_system=yes, ax_cv_boost_system=no)
 			 CXXFLAGS=$CXXFLAGS_SAVE
-             AC_LANG_POP([C++])
+
+        	AC_COMPILE_IFELSE([_AX_BOOST_SYSTEM_PROGRAM(108900)],[
+			ax_boost_user_system_header_only=yes
+		],[
+			ax_boost_user_system_header_only=no
 		])
-		if test "x$ax_cv_boost_system" = "xyes"; then
+
+	])
+		if test "x$ax_boost_user_system_header_only" != "xyes" && test "x$ax_cv_boost_system" = "xyes"; then
 			AC_SUBST(BOOST_CPPFLAGS)
 
 			AC_DEFINE(HAVE_BOOST_SYSTEM,,[define if the Boost::System library is available])
@@ -107,15 +120,18 @@ AC_DEFUN([AX_BOOST_SYSTEM],
                   done
 
             fi
-            if test "x$ax_lib" = "x"; then
-                AC_MSG_ERROR(Could not find a version of the Boost::System library!)
-            fi
-			if test "x$link_system" = "xno"; then
-				AC_MSG_ERROR(Could not link against $ax_lib !)
-			fi
+
+	  if test "x$ax_boost_user_system_header_only" != "xyes" ; then
+	    if test "x$ax_lib" = "x"; then
+            	        AC_MSG_ERROR(Could not find a version of the Boost::System library!)
+		fi
+		    if test "x$link_system" = "xno"; then
+			    AC_MSG_ERROR(Could not link against $ax_lib !)
 		fi
+	 fi
 
 		CPPFLAGS="$CPPFLAGS_SAVED"
-	LDFLAGS="$LDFLAGS_SAVED"
+		LDFLAGS="$LDFLAGS_SAVED"
+	fi
 	fi
 ])

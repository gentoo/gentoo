Holger Hoffst√§tte 2025-02-12 14:33:04 UTC
As mentioned on IRC:

The only uses of last_message in configuration.c are
to initialize the buffer with a terminating null. It
seems much easier to move the initialization to log.c
and just remove the declaration/initialization from
configuration.c.

As there is already an initialisation of the buffer
in log.c all that's needed is to zap the two unnecessary
lines:

--- a/Source/configuration.c
+++ b/Source/configuration.c
@@ -67,7 +67,6 @@ void set_default_values() {
   extern unsigned short log_closing;
   extern unsigned short use_ident;
   extern unsigned int repeats;
-  extern char *last_message;
 
   dns_expire = DNS_EXPIRE;
   log_protocols = NONE;
@@ -79,7 +78,6 @@ void set_default_values() {
   log_closing = FALSE;
   use_ident = FALSE;
   repeats = 0;
-  last_message = '\0';
 }
 
 void parse_config_file(char *filename) {

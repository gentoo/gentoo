From 504b3590182175390f474657a372e78fb1508262 Mon Sep 17 00:00:00 2001
From: Albert Astals Cid <aacid@kde.org>
Date: Thu, 14 Sep 2017 19:14:23 +0200
Subject: Splash::scaleImage: Do not try to scale if srcHeight or srcWidth are
 < 1

Bug #102719

diff --git a/splash/Splash.cc b/splash/Splash.cc
index 39fc7d6..aba7814 100644
--- a/splash/Splash.cc
+++ b/splash/Splash.cc
@@ -4152,7 +4152,7 @@ SplashBitmap *Splash::scaleImage(SplashImageSource src, void *srcData,
   SplashBitmap *dest;
 
   dest = new SplashBitmap(scaledWidth, scaledHeight, 1, srcMode, srcAlpha, gTrue, bitmap->getSeparationList());
-  if (dest->getDataPtr() != NULL) {
+  if (dest->getDataPtr() != NULL && srcHeight > 0 && srcWidth > 0) {
     if (scaledHeight < srcHeight) {
       if (scaledWidth < srcWidth) {
 	scaleImageYdXd(src, srcData, srcMode, nComps, srcAlpha,
-- 
cgit v0.10.2


https://github.com/Qalculate/libqalculate/issues/853
https://github.com/Qalculate/libqalculate/commit/9370610599a200577f5368849e63151ec8399cb5
https://github.com/Qalculate/libqalculate/commit/113f4448bb0c1bbb666ec237b07da1e4a667b629

From 113f4448bb0c1bbb666ec237b07da1e4a667b629 Mon Sep 17 00:00:00 2001
From: "Hanna K." <hanna.knutsson@protonmail.com>
Date: Mon, 13 Oct 2025 18:29:18 +0200
Subject: [PATCH 1/3] Fix compilation with -fsanitize=undefined (issue #853)

--- a/libqalculate/Calculator-parse.cc
+++ b/libqalculate/Calculator-parse.cc
@@ -3458,6 +3458,7 @@ void Calculator::parse(MathStructure *mstruct, string str, const ParseOptions &p
 												best_pl = name_length + name_length_old;
 												best_pnl = name_length_old;
 												index = -1;
+												break;
 											}
 											if(!p_mode) {
 												str.erase(str_index - name_length_old, name_length_old);

--- a/src/qalc.cc
+++ b/src/qalc.cc
@@ -4558,6 +4558,9 @@ int main(int argc, char *argv[]) {
 			}
 			if(!unittest || str.empty() || str[0] != '\t') remove_blank_ends(str);
 			if(str.empty() || str[0] == '#' || (str.length() >= 2 && str[0] == '/' && str[1] == '/')) continue;
+#ifdef DISABLE_INSECURE
+			if(unittest && str.find("libqalculate_tests_vector") != string::npos) break;
+#endif
 		} else {
 #ifdef HAVE_LIBREADLINE
 			rlbuffer = readline(prompt.c_str());


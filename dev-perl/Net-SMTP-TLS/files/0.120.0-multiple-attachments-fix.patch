diff --git a/lib/Net/SMTP/TLS.pm b/lib/Net/SMTP/TLS.pm
index 10f9f19..4936fe5 100644
--- a/lib/Net/SMTP/TLS.pm
+++ b/lib/Net/SMTP/TLS.pm
@@ -367,6 +367,7 @@ sub datasend {
 				return undef;
 			}
 			$len -= $w;
+			$offset += $w;
 		}
 		else
 		{

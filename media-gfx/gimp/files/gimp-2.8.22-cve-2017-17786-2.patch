From 22e2571c25425f225abdb11a566cc281fca6f366 Mon Sep 17 00:00:00 2001
From: Jehan <jehan@girinstud.io>
Date: Wed, 20 Dec 2017 13:26:26 +0100
Subject: plug-ins: TGA 16-bit RGB (without alpha bit) is also valid.

According to some spec on the web, 16-bit RGB is also valid. In this
case, the last bit is simply ignored (at least that's how it is
implemented right now).

(cherry picked from commit 8ea316667c8a3296bce2832b3986b58d0fdfc077)
---
 plug-ins/common/file-tga.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/plug-ins/common/file-tga.c b/plug-ins/common/file-tga.c
index 426acc2..eb14a1d 100644
--- a/plug-ins/common/file-tga.c
+++ b/plug-ins/common/file-tga.c
@@ -568,7 +568,8 @@ load_image (const gchar  *filename,
              info.bpp != 24 && info.bpp != 32)      ||
             ((info.bpp == 15 || info.bpp == 24) &&
              info.alphaBits != 0)                   ||
-            (info.bpp == 16 && info.alphaBits != 1) ||
+            (info.bpp == 16 && info.alphaBits != 1 &&
+             info.alphaBits != 0)                   ||
             (info.bpp == 32 && info.alphaBits != 8))
           {
             g_message ("Unhandled sub-format in '%s' (type = %u, bpp = %u, alpha = %u)",
-- 
cgit v0.12


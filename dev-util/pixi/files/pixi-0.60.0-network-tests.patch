From cb2a8ae299ee871af4f120f417b6600a672d6388 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Micha=C5=82=20G=C3=B3rny?= <mgorny@gentoo.org>
Date: Thu, 4 Dec 2025 05:30:00 +0100
Subject: [PATCH] Mark more tests as `online_tests`
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Michał Górny <mgorny@gentoo.org>
---
 crates/pixi/tests/integration_rust/pypi_tests.rs        | 2 ++
 crates/pixi/tests/integration_rust/solve_group_tests.rs | 1 +
 crates/pixi/tests/integration_rust/update_tests.rs      | 3 +++
 3 files changed, 6 insertions(+)

diff --git a/crates/pixi/tests/integration_rust/pypi_tests.rs b/crates/pixi/tests/integration_rust/pypi_tests.rs
index f2733e90e..5f6fad542 100644
--- a/crates/pixi/tests/integration_rust/pypi_tests.rs
+++ b/crates/pixi/tests/integration_rust/pypi_tests.rs
@@ -877,6 +877,7 @@ async fn test_uv_index_correctly_parsed() {
 /// Tests that prerelease-mode = "allow" allows pre-release versions to be resolved.
 /// Without this setting, the resolver would skip pre-releases unless explicitly requested.
 #[tokio::test]
+#[cfg_attr(not(feature = "online_tests"), ignore)]
 async fn test_prerelease_mode_allow() {
     setup_tracing();
 
@@ -938,6 +939,7 @@ async fn test_prerelease_mode_allow() {
 
 /// Tests that prerelease-mode = "disallow" prevents pre-release versions from being resolved.
 #[tokio::test]
+#[cfg_attr(not(feature = "online_tests"), ignore)]
 async fn test_prerelease_mode_disallow() {
     setup_tracing();
 
diff --git a/crates/pixi/tests/integration_rust/solve_group_tests.rs b/crates/pixi/tests/integration_rust/solve_group_tests.rs
index 22b50f4a6..944939576 100644
--- a/crates/pixi/tests/integration_rust/solve_group_tests.rs
+++ b/crates/pixi/tests/integration_rust/solve_group_tests.rs
@@ -786,6 +786,7 @@ async fn test_disabled_mapping() {
 }
 
 #[tokio::test]
+#[cfg_attr(not(feature = "online_tests"), ignore)]
 async fn test_custom_mapping_ignores_backwards_compatibility() {
     setup_tracing();
 
diff --git a/crates/pixi/tests/integration_rust/update_tests.rs b/crates/pixi/tests/integration_rust/update_tests.rs
index edd3b84bc..68b9b58af 100644
--- a/crates/pixi/tests/integration_rust/update_tests.rs
+++ b/crates/pixi/tests/integration_rust/update_tests.rs
@@ -160,6 +160,7 @@ async fn test_update_single_package() {
 }
 
 #[tokio::test]
+#[cfg_attr(not(feature = "online_tests"), ignore)]
 async fn test_update_conda_package_doesnt_update_git_pypi() {
     setup_tracing();
 
@@ -245,6 +246,7 @@ async fn test_update_conda_package_doesnt_update_git_pypi() {
 }
 
 #[tokio::test]
+#[cfg_attr(not(feature = "online_tests"), ignore)]
 async fn test_update_conda_package_doesnt_update_git_pypi_pinned() {
     setup_tracing();
 
@@ -293,6 +295,7 @@ async fn test_update_conda_package_doesnt_update_git_pypi_pinned() {
 }
 
 #[tokio::test]
+#[cfg_attr(not(feature = "online_tests"), ignore)]
 async fn test_update_git_pypi_when_requested() {
     setup_tracing();
 
